<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.ecobay.admin.mapper.NoticeMapper">
	
	<insert id="insertNotice" parameterType="NoticeVO">
		INSERT INTO notice (
			title, content, regdate, moddate, viewcnt, use_yn
		)
		VALUES ( 
			#{title}, #{content}, now(), now(), 0, true
		)
	</insert>
	
	<select id="selectNoticeList" resultType="NoticeVO">
		SELECT * 
		FROM notice
		WHERE use_yn = true
		ORDER BY regdate DESC
	</select>
	
	<select id="selectNoticeOne" parameterType="int" resultType="NoticeVO">
		SELECT * 
		FROM notice
		WHERE notice_idx = #{notice_idx}
	</select>
	
	<update id="updateNotice" parameterType="NoticeVO">
		UPDATE notice SET
			title = #{title},
			content = #{content},
			moddate = now()
		WHERE notice_idx = #{notice_idx}
	</update>
	
	<update id="updateViewCnt" parameterType="NoticeVO">
		UPDATE notice SET
			viewcnt = viewcnt+1
		WHERE notice_idx = #{notice_idx}
	</update>
	
	
	<update id="deleteNotice" parameterType="int">
		UPDATE notice SET
			use_yn = false,
			deldate = now()
		WHERE notice_idx = #{notice_idx}
	</update>

</mapper>

