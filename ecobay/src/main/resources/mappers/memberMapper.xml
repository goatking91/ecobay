<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.ecobay.user.mapper.MemberMapper">

	<insert id="create" parameterType="MemberVO">
		insert into member 
		(member_id,member_name,pwd,birth,zipcode,addr1,addr2,gender,phone,join_yn,regdate)
		values(#{member_id},#{member_name},#{pwd},#{birth},#{zipcode},#{addr1},#{addr2},#{gender},#{phone},#{join_YN},now())
	</insert>
	
	<select id="read" parameterType="String" resultType="MemberVO">
		select * from member where member_id = #{member_id}
	</select>
	
	<select id="readAll" resultType="MemberVO">
		select @rownum:=@rownum+1 as rn, m.* from member m, (select @rownum:=0) tmp
	</select>
	
	<select id="count" resultType="int">
		select count(*) from member
 	</select>
	
	<update id="verify" parameterType="MemberVO">
		update member set
		join_YN = true
		where member_id = #{member_id}
		and birth = #{birth}
	</update>
	
	<update id="update" parameterType="MemberVO">
		update member set
		pwd = #{pwd},
		zipcode = #{zipcode},
		addr1 = #{addr1},
		addr2 = #{addr2},
		moddate = now()
		where member_id = #{member_id}			
	</update>
	
	<update id="delete" parameterType="String"><!-- 회원탈퇴 -->
		update member set
		join_yn = false,
		use_yn = false
		where member_id = #{member_id}	
	</update>
</mapper>

